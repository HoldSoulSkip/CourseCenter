@{
    ViewBag.Title = "GetStudentWork";
    Layout = "~/Views/Shared/CouserAndStudent.cshtml";
}

@section span9{

    <div class="span9" id="content">
        <div class="row-fluid">
            <!-- block -->
            <div class="block">
                <div class="navbar navbar-inner block-header">
                    <div class="muted pull-left">我的电子学档</div>
                </div>
                <div class="block-content collapse in">
                    <div class="span12">
                        <div class="table-toolbar">
                            <div class="btn-group pull-right">
                                <button data-toggle="dropdown" class="btn dropdown-toggle">其他模块 <span class="caret"></span></button>
                                <ul class="dropdown-menu">
                                    <li><a href="/LearnerManage/GetStudentWork?courseid=@ViewBag.courseid&moduleTag=1">模块一  </a>

                                    </li>
                                    <li><a href="/LearnerManage/GetStudentWork?courseid=@ViewBag.courseid&moduleTag=2">模块二  </a>

                                    </li>
                                    <li><a href="/LearnerManage/GetStudentWork?courseid=@ViewBag.courseid&moduleTag=3">模块三  </a>

                                    </li>
                                    <li><a href="/LearnerManage/GetStudentWork?courseid=@ViewBag.courseid&moduleTag=4">模块四  </a>

                                    </li>
                                    <li><a href="/LearnerManage/GetStudentWork?courseid=@ViewBag.courseid&moduleTag=5">模块五  </a>

                                    </li>



                                </ul>
                            </div>


                        </div>
                        <h7>这里显示学生所选的课程的列表--提示信息-做完以后要删除</h7>

                        <table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered" style="height: auto; min-height: 50px;" id="example2">

                            <tr>

                                <th style="text-align: center">模块成绩</th>
                                @{
                                    if (@ViewBag.cScore != null)
                                    {
                                    <th style="text-align: center">@ViewBag.cScore.ModuleScore</th>
                                    }
                                }
                            </tr>
                        </table>

                        <form class="form-horizontal" method="post" enctype="multipart/form-data">
                            <fieldset>
                                <div class="control-group">
                                    <label class="control-label" for="typeahead">模块名称 </label>
                                    <div class="controls">

                                        <div class="alert alert-info" style="width: 520px; text-align: center">
                                            @ViewBag.module.ModuleTitle

                                        </div>


                                    </div>
                                </div>
                                <div class="control-group">
                                    <label class="control-label" for="typeahead">学生上传作业 </label>
                                    <div class="controls">
                                        @{
                                            if (@ViewBag.sWork != null)
                                            { 
                                            <text>
                                            <a class="btn btn-info "  href="@ViewBag.sWork.WorkFilePath" target="_blank">完成下载</a>


                                            </text>
                                            }
                                            else
                                            {
                                            <text>
                                            <a class="btn btn-info " href="" target="_blank">完成下载</a>
                                            </text>
                                            }
                                        }
                                    </div>

                                </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label" for="textarea2">作业内容</label>
                        <div class="controls">
                            @{
                                if (@ViewBag.sWork != null)
                                {
                                <div class="well" style="background-color: rgba(173, 178, 241, 0.42)">
                                    @Html.Raw(ViewBag.sWork.WorkContent)
                                </div>
                                }
                                else
                                {
                                <div class="well" style="background-color: rgba(173, 178, 241, 0.42)">
                                    <p>还没有提交任务 </p>
                                </div>
                                }
                            }

                        </div>
                    </div>
                    @{int count = 0;}
                    @foreach (var item in ViewBag.listErecord as List<CourseCenter.Controllers.Erecord>)
                    {

                        count++;
                        <div class="control-group">
                            <label class="control-label" for="typeahead">题目 @count </label>
                            <div class="controls">

                                <text>
                                            <div class="alert alert-info" style="width:520px; text-align:center">
                                             @item.QTitle
                                             
                                            </div>
                                            <div class="alert alert-success" style="width:520px; text-align:center">
                                                   @item.Answer
                                             
                                            </div>
                                            <div class="alert alert-danger" style="width:520px; text-align:center">
                                                  @item.AnswerScore
                                             
                                            </div>
                                            </text>

                            </div>
                        </div>
                    }


                    @foreach (var item in ViewBag.listErecord as List<CourseCenter.Controllers.Erecord>)
                    {

                        count++;
                        <div class="control-group">
                            <label class="control-label" for="typeahead">题目 @count </label>
                            <div class="controls">

                                <text>
                                            <div class="alert alert-info" style="width:520px; text-align:center">
                                             @item.QTitle
                                             
                                            </div>
                                            <div class="alert alert-success" style="width:520px; text-align:center">
                                                   @item.Answer
                                             
                                            </div>
                                            <div class="alert alert-danger" style="width:520px; text-align:center">
                                                  @item.AnswerScore
                                             
                                            </div>
                                            </text>

                            </div>
                        </div>
                    }


                    <div class="control-group">
                        <label class="control-label" for="textarea2">教师总评</label>
                        <div class="controls">
                            @{
                                if (@ViewBag.cScore != null)
                                {
                                <div class="well" style="background-color: rgba(173, 178, 241, 0.42)">
                                    <p>@ViewBag.cScore.ModuleComment </p>
                                </div>
                                }
                            }

                        </div>
                    </div>

                    </fieldset>
                        </form>
                </div>
            </div>

        </div>
        <!-- /block -->
    </div>

    <div class="row-fluid">
        <!-- block -->
        <div class="block">
            <div class="navbar navbar-inner block-header">
                <div class="muted pull-left">我的作品--按照模块，调用学生作品的表</div>
                <div class="pull-right">
                    <span class="badge badge-info"></span>

                </div>
            </div>


            <div class="row-fluid padd-bottom">
                <div class="span3">
                    <a href="#" class="thumbnail">
                        <img data-src="holder.js/260x180" alt="260x180" style="width: 260px; height: 180px;" src="~/Content/images/de_list.jpg">
                    </a>
                </div>
                <div class="span3">
                    <a href="#" class="thumbnail">
                        <img data-src="holder.js/260x180" alt="260x180" style="width: 260px; height: 180px;" src="~/Content/images/de_list.jpg">
                    </a>
                </div>
                <div class="span3">
                    <a href="#" class="thumbnail">
                        <img data-src="holder.js/260x180" alt="260x180" style="width: 260px; height: 180px;" src="~/Content/images/de_list.jpg">
                    </a>
                </div>
                <div class="span3">
                    <a href="#" class="thumbnail">
                        <img data-src="holder.js/260x180" alt="260x180" style="width: 260px; height: 180px;" src="~/Content/images/de_list.jpg">
                    </a>
                </div>





            </div>
            <h4>因为坑爹的css --所以你在做的时候要做判断，一次循环只能做显示四个</h4>
            <p style="color: red">一个row-fluid padd-bottom 中只能装载四个--如果你统计出来学生作品大于四个，你要做分割</p>
            <h4>所以你不能一次循环出所有，页面会乱，所以，亲，你可以从页面中限定一下--当学生作品大于四个的时候，下面的应该从五开始了--你会做么？</h4>

            <div class="row-fluid padd-bottom">
                <div class="span3">
                    <a href="#" class="thumbnail">
                        <img data-src="holder.js/260x180" alt="260x180" style="width: 260px; height: 180px;" src="~/Content/images/de_list.jpg">
                    </a>
                </div>
                <div class="span3">
                    <a href="#" class="thumbnail">
                        <img data-src="holder.js/260x180" alt="260x180" style="width: 260px; height: 180px;" src="~/Content/images/de_list.jpg">
                    </a>
                </div>
                <div class="span3">
                    <a href="#" class="thumbnail">
                        <img data-src="holder.js/260x180" alt="260x180" style="width: 260px; height: 180px;" src="~/Content/images/de_list.jpg">
                    </a>
                </div>
                <div class="span3">
                    <a href="#" class="thumbnail">
                        <img data-src="holder.js/260x180" alt="260x180" style="width: 260px; height: 180px;" src="~/Content/images/de_list.jpg">
                    </a>
                </div>
            </div>

        </div>
    </div>

}

@section booterScript{

    <script src="~/Content/vendors/jquery-1.9.1.js"></script>
    <script src="~/Content/bootstrap/js/bootstrap.min.js"></script>
    <script src="~/Content/vendors/datatables/js/jquery.dataTables.min.js"></script>
    <script src="~/Content/bootstrap/js/jquery.bootstrap.js"></script>
    <script src="~/Content/assets/scripts.js"></script>
    <script src="~/Content/assets/DT_bootstrap.js"></script>
    <script>
        $(function () {

        });
        ///提交成绩
        function ConfirmSocre(Sid, Cid, MT) {
            var score = $("#" + MT).val();

            $.ajax({
                type: "POST",
                url: "/LearnerManage/SetScore",
                data: "StudentId=" + Sid + "&CourseId=" + Cid + "&score=" + score + "&ModuleTag=" + MT,
                success: function (data) {
                    if (data == "OK") {
                        $("#" + MT).val(score);
                        alert("模块" + MT + "提交成功");



                    } else {
                        $("#" + MT).val("赋值不正确");

                    }

                }

            })

        }
        function show() {
            $('#myModal').css("z-index", 1045);
            $('#myModal').modal('show');

        }
        function Edit() {
            $('#myModal2').css("z-index", 1045);
            $('#myModal2').modal('show');

        }

        /** 提交按钮****/
        function submit() {

            $.messager.alert("Success", "恭喜您，添加信息成功");
            $('#myModal').modal('hide');
        }
        function submitEdit() {

            $.messager.alert("Success", "恭喜您，修改信息成功");
            $('#myModal2').modal('hide');
        }

    </script>
}
