@{
    ViewBag.Title = "GroupDetail";
    Layout = "~/Views/Shared/admin_Layout.cshtml";
}

@section head{
  
        <!-- Bootstrap -->
        <link href="~/Content/bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen">
        <link href="~/Content/bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet" media="screen">
     <link href="~/Content/assets/DT_bootstrap.css" rel="stylesheet" media="screen">
       <link href="~/Content/bootstrap/css/teacherCourse.css" rel="stylesheet" />
        <link href="~/Content/assets/styles.css" rel="stylesheet" media="screen">
        <!-- 乱码的原因是没有设置参数-->
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
            <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
    
        <script src="~/Content/vendors/modernizr-2.6.2-respond-1.1.0.min.js"></script>
      }
@section span9{
    <div class="span9" id="content">
      <div class="row-fluid"> 
        <!-- block -->
        <div class="block">
          <div class="navbar navbar-inner block-header">
            <div class="muted pull-left">详细内容</div>
          </div>
          <div class="block-content collapse in">
            <div class="span12">
              <div class="table-toolbar">
              @*  <div class="btn-group"> <a href="#">
                  <button class="btn btn-success" data-toggle="modal"  onClick="show()"
   >Add New <i class="icon-plus icon-white"></i></button>
                  </a> </div>*@
               <!-- <div class="btn-group pull-right">
                  <button data-toggle="dropdown" class="btn dropdown-toggle">其他课程小组 <span class="caret"></span></button>
                  <ul class="dropdown-menu">
          @*            @foreach (var course in ViewBag.listCourse)
                      {
                           <text><li><a href="javascript:void(0)" onclick="changGroup(@course.Id)"> @course.CourseName </a></li></text>
                      }*@
                   
                  </ul>
                </div>--->
              </div>
  
              <table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered"  >
                <thead>
                  <tr style="background-color:#00A3DA">
                  <th style="width:100px;color:#fff">发起人</th>                  
                    <th style="color:#fff;width:600px;" >@Html.Raw((ViewBag.ctg).CourseGroupCreatName)</th>
                    <th style="color:#fff"  colspan="9">发帖时间: @((ViewBag.ctg).CreatTime)</th>
                    
                  </tr>
                </thead>

                <tbody id="CreateTable">
                    <tr>
                        <td>@((ViewBag.ctg).CourseGroupCreatAcount)</td>
                        <td colspan="10" style=" min-height:200px; height:auto;">@Html.Raw( ((ViewBag.ctg).Content))</td>

                        </tr>
                      <tr style="background-color:#ddd" >
                    <td  colspan="8"></td>
                            <td style="text-align:center" ><a href="javascript:void(0)"  class="myGruop"></a></td>
                      <td style="text-align:center" ><a href="javascript:void(0)" class="myGruop"><i class="icon-thumbs-up icon-white"></i>顶</a></td>
                        <td style="text-align:center" ><a href="javascript:void(0)" class="myGruop"><i class="icon-thumbs-down icon-white"></i>踩</a></td>
                           
                  </tr>
              </tbody>

                  <tbody id="ReplayTable">
                    @foreach (var item in Model)
                    {
                         <tr style="min-height:200px; height:auto">
                        <td style="height:80px; width:100px;">
                         <h6 style="text-align:center;display:block; color:#428bca "> @item.FromAccount </h6>
                            <h6 style="text-align:center;display:block ;color:#428bca">@item.FromDate </h6>
                               </td>
                        <td colspan="10"  style=" min-height:200px; height:auto;">
  @*                     <div  data-container="body" style="width:1px;" data-toggle="popover" data-html="true" data-placement="right" 
      data-content="@item.Content">
                                
                            </div>*@
                           <div data-html="true">
                                <pre>
                                @Html.Raw(item.Content)

  </pre>
                            </div>
    </td>

                        </tr>
                      <tr style="background-color:#ddd" >
                    <td  colspan="8"></td>
                           <td style="text-align:center" ><a href="javascript:void(0)" class="myGruop" ></a></td>
                      <td style="text-align:center" ><a href="javascript:void(0)" class="myGruop"><i class="icon-thumbs-up icon-white"></i>顶</a></td>
                        <td style="text-align:center" ><a href="javascript:void(0)" class="myGruop"><i class="icon-thumbs-down icon-white"></i>踩</a></td>
                            
                  </tr>
                    }
                     
                              <tr>
                        <td></td>
                        <td colspan="10" style=" min-height:200px; height:auto;">
    </td>

                      

              </tbody>
 </table>
                <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close"
                        data-dismiss="modal" aria-hidden="true">
                        &times;
                    </button>
                    <h7 class="modal-title" id="myModalLabel">添加回复 </h7>
                </div>
                <div class="modal-body">
                    <div class="block">
                        <div class="navbar navbar-inner block-header">
                            <div class="muted pull-left">回复信息 </div>
                        </div>
                        <div class="block-content collapse in">
                            <div class="span13">

                                <form action="/AdminEidt/AddReply" id="addReplay" class="form-horizontal" method="post">
                                    <fieldset>
                                        <input type="hidden" name="GroupID" value="@((ViewBag.ctg).Id)" />
                                        <div class="control-group">
                                            <label class="control-label" for="textarea2">回复内容</label>
                                            <div class="controls">
                                                <textarea class="input-xlarge textarea" placeholder="Enter text ..." name="Content" style="width: 810px; height: 200px"></textarea>
                                            </div>
                                        </div>
                                    </fieldset>
                                </form>

                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default"
                        data-dismiss="modal">
                        关闭
                    </button>
                    <button type="button" class="btn btn-primary" onclick="submitAdd()">提交信息 </button>
                </div>
            </div>
        </div>
            </div>
          </div>
        </div>
        <!-- /block --> 
      </div>
    </div>
 }
        <!--/.fluid-container-->
       @section booterScript{
<link href="~/Content/vendors/datepicker.css" rel="stylesheet" media="screen">
    <link href="~/Content/vendors/uniform.default.css" rel="stylesheet" media="screen">
    <link href="~/Content/vendors/chosen.min.css" rel="stylesheet" media="screen">

    <link href="~/Content/vendors/wysiwyg/bootstrap-wysihtml5.css" rel="stylesheet" media="screen">

    <script src="~/Content/vendors/jquery-1.9.1.js"></script>
    <script src="~/Content/bootstrap/js/bootstrap.min.js"></script>
    <script src="~/Content/vendors/jquery.uniform.min.js"></script>
    <script src="~/Content/vendors/chosen.jquery.min.js"></script>
    <script src="~/Content/vendors/bootstrap-datepicker.js"></script>

    <script src="~/Content/vendors/wysiwyg/wysihtml5-0.3.0.js"></script>
    <script src="~/Content/vendors/wysiwyg/bootstrap-wysihtml5.js"></script>

    <script src="~/Content/vendors/wizard/jquery.bootstrap.wizard.min.js"></script>

    <script type="text/javascript" src="~/Content/vendors/jquery-validation/dist/jquery.validate.min.js"></script>
    <script src="~/Content/assets/form-validation.js"></script>
              <script src="~/Content/CenterUI/AdmingUI.js"></script>
        <script>

            jQuery(document).ready(function () {
                FormValidation.init();
            });
            $(function () {
                $(".datepicker").datepicker();
                $(".uniform_on").uniform();
                $(".chzn-select").chosen();
                $('.textarea').wysihtml5();
                $("[data-toggle='popover']").popover("show");
                $('#rootwizard').bootstrapWizard({
                    onTabShow: function (tab, navigation, index) {
                        var $total = navigation.find('li').length;
                        var $current = index + 1;
                        var $percent = ($current / $total) * 100;
                        $('#rootwizard').find('.bar').css({ width: $percent + '%' });
                        // If it's the last tab then hide the last button and show the finish instead
                        if ($current >= $total) {
                            $('#rootwizard').find('.pager .next').hide();
                            $('#rootwizard').find('.pager .finish').show();
                            $('#rootwizard').find('.pager .finish').removeClass('disabled');
                        } else {
                            $('#rootwizard').find('.pager .next').show();
                            $('#rootwizard').find('.pager .finish').hide();
                        }
                    }
                });
                $('#rootwizard .finish').click(function () {
                    alert('Finished!, Starting over!');
                    $('#rootwizard').find("a[href*='tab1']").trigger('click');
                });
            });





            function show(id) {
               
                $('#myModal2').css("z-index", 1045);
                $('#myModal2').modal('show');
            }

            function submitAdd() {
               
                $("#addReplay").submit();
                $('#myModal2').modal('hide');

            }






            //改变GroupID
            function changGroup(id) {

                $.ajax({
                    url: "/StudentGroup/ChangeCourseGroup",
                    data: "id=" + id,
                    type: "post",
                    success: function (data) {

                        var tdValue = $("#chartTable");
                        tdValue.html("");
                        var htmlStr = "";
                        htmlStr += "<tr>";
                        $.each(JSON.parse(data), function (i, item) {
                            htmlStr += "<td>";
                            htmlStr += item["CourseGroupCreatName"];
                            htmlStr += "</td>";

                            htmlStr += "<td>";
                            htmlStr += item["CourseGroupCreatAcount"];
                            htmlStr += "</td>";

                            htmlStr += "<td>";
                            htmlStr += item["CreatTime"];
                            htmlStr += "</td>";

                            htmlStr += "<td style=\"text-align: center\" ><a class=\"btn btn-primary\" href=\"/StudentGroup/GroupDetail?id=item[\"Id\"]\"><i class=\"icon-heart icon-white\"></i>"; htmlStr += "Enter";
                            htmlStr += "</a></td>";

                            htmlStr += "<td style=\"text-align: center\" ><a class=\"btn btn-success\"><i class=\"icon-thumbs-up icon-white\"></i>";
                            htmlStr += "Like";
                            htmlStr += "</a></td>";
                            htmlStr += "<td style=\"text-align: center\" ><a class=\"btn btn-success\"><i class=\"icon-thumbs-down icon-white\"></i>";
                            htmlStr += "Unlike";
                            htmlStr += "</a></td>";


                        });

                        htmlStr += "</tr>";
                        tdValue.html(htmlStr);



                    }
                });
            }

        </script>
     }





@section ModalShow{

    
}













